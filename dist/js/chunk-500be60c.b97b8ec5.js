(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-500be60c"],{"28a4":function(t,a,s){t.exports=s.p+"img/null-pic.08c7f8f7.jpg"},"59ee":function(t,a,s){"use strict";var i=s("be3d"),e=s.n(i);e.a},be3d:function(t,a,s){},c84b:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"detail"},[i("div",{staticClass:"nav-box"},[i("van-nav-bar",{attrs:{title:t.detailData.title,"left-arrow":""},on:{"click-left":t.go}})],1),i("div",{staticClass:"movie-box"},[i("div",{staticClass:"movie-title"}),i("div",{staticClass:"movie-header clearfix"},[i("div",{staticClass:"movie-img fl"},[i("div",{staticClass:"movie-pic"},[t.detailData.images?i("img",{staticClass:"auto-img movie-pic-img",attrs:{src:t.detailData.images.small,alt:""}}):t._e()])]),i("div",{staticClass:"movie-info fl clearfix"},[i("div",{staticClass:"movie-name"},[i("span",[t._v(t._s(t.detailData.title))])]),i("div",{staticClass:"tag-avatar clearfix"},[i("div",t._l(t.detailData.genres,(function(a,s){return i("span",{key:s},[t._v(t._s(a+" "))])})),0),i("div",t._l(t.detailData.casts,(function(a,s){return i("span",{key:s},[t._v(t._s(a.name+" "))])})),0),i("div",[i("span",[t._v(t._s(t.detailData.mainland_pubdate)+" 大陆上映")])])]),i("div",{staticClass:"was-look is-look"},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"like-box fl",class:{active:t.islike},on:{click:function(a){return t.like(t.detailData.id)}}}),i("div",{staticClass:"fl",style:"padding-left:5px"},[i("span",[t._v("想看")])])])])])]),i("div",{staticClass:"movie-people clearfix"},[i("span",{staticClass:"fl",style:"padding-right:70px"},[t._v("实时口碑")]),i("span",{staticClass:"fl"},[t._v(t._s((t.detailData.wish_count/1e4).toFixed(2))+"万人想看")])]),i("div",{staticClass:"movie-summary"},[i("div",{staticClass:"summary-top clearfix"},[i("span",{staticClass:"fl"},[t._v("简介")]),i("span",{staticClass:"fr",on:{click:t.Open}},[t._v(" 展开 "),i("van-icon",{staticClass:"down",attrs:{name:"arrow-down",size:"14"}})],1)]),i("div",{staticClass:"summary-txt"},[i("span",{staticClass:"summary-txt-content",style:t.isOpen?"-webkit-line-clamp: ":"-webkit-line-clamp: 3"},[t._v(t._s(t.detailData.summary))])])]),i("div",{staticClass:"director-cast"},[t._m(0),i("div",{staticClass:"allInfo-box"},[i("div",{staticClass:"info-box clearfix",style:"width:"+(93.04*(t.detailData.directorNum+t.detailData.castsNum)-13)+"px"},[i("div",{staticClass:"director-box clearfix fl"},t._l(t.detailData.directors,(function(a,s){return i("div",{key:s,staticClass:"director-info fl"},[i("div",{staticClass:"director-image"},[i("img",{staticClass:"auto-img director-img",attrs:{src:a.avatars.small,alt:""}})]),i("div",{staticClass:"director-name"},[t._v(t._s(a.name))]),i("div",{staticClass:"director-name"},[t._v("导演")])])})),0),i("div",{staticClass:"director-box clearfix fl"},t._l(t.detailData.casts,(function(a,e){return i("div",{key:e,staticClass:"casts-info fl"},[i("div",{staticClass:"director-image"},[a.avatars?i("img",{staticClass:"auto-img director-img",attrs:{src:a.avatars.small,alt:""}}):i("img",{staticClass:"auto-img director-img",attrs:{src:s("28a4"),alt:""}})]),i("div",{staticClass:"director-name"},[t._v(t._s(a.name))]),i("div",{staticClass:"director-name"},[t._v(t._s(a.name_en))])])})),0)])])]),i("div",{staticClass:"stage"},[i("div",{staticClass:"stage-name"},[t._v("剧照")]),i("div",{staticClass:"stage-box"},[i("div",{staticClass:"stage-img-box",style:"width:"+(130*t.detailData.photosNum-10)+"px"},t._l(t.detailData.photos,(function(t,a){return i("van-image",{key:a,staticClass:"fl",attrs:{width:"120",height:"100",src:t.cover}})})),1)])]),i("div",{staticClass:"review-box"},[t._m(1),i("div",{staticClass:"review-info-box"},t._l(t.detailData.popular_reviews,(function(a,s){return i("div",{key:s,staticClass:"review-info"},[i("div",{staticClass:"review-top clearfix"},[i("div",{staticClass:"user-img fl"},[i("img",{staticClass:"auto-img img",attrs:{src:a.author.avatar,alt:""}})]),i("div",{staticClass:"user-name fl"},[i("span",[t._v(t._s(a.author.name))])])]),i("div",{staticClass:"review-bottom"},[i("div",{staticClass:"review-title"},[t._v('"'+t._s(a.title)+'"')]),i("div",{staticClass:"review-value"},[i("span",[t._v(t._s(a.summary))])])])])})),0),i("div",{staticClass:"all-review"},[i("span",{on:{click:function(a){return t.lookReview(t.detailData.id)}}},[t._v("查看全部评论")])])])])])},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"director-cast-title"},[s("span",[t._v("演职人员")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"review"},[s("span",[t._v("影评")])])}],l=s("2f62"),c={name:"Detail",data(){return{isOpen:!1,islike:!1,likeData:[]}},computed:{...Object(l["b"])("detailModule",["detailData"])},created(){let t=this.$route.params.id;this.$store.commit("detailModule/emptyData");let a=JSON.parse(localStorage.getItem("likeData"));null!=a&&(this.likeData=a,a.forEach(a=>{a.id==t&&(this.islike=!0)})),this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"GET",url:"/test",params:{type:"/subject/"+t+"?",apikey:this.apikey}}).then(t=>{this.$toast.clear(),t.data.isWanna=!1,t.data.photosNum=t.data.photos.length,t.data.directorNum=t.data.directors.length,t.data.castsNum=t.data.casts.length,t.data.popular_reviews=t.data.popular_reviews.slice(0,5),this.$store.commit("detailModule/changeData",{key:"detailData",value:t.data})}).catch(t=>{this.$toast.clear()})},methods:{getData(t,a){this.islike=!0;let s={};this.axios({method:"GET",url:"/test",params:{type:"/subject/"+a+"?",apikey:this.apikey}}).then(a=>{s=a.data,t.unshift(s),localStorage.setItem("likeData",JSON.stringify(t))}).catch(t=>{})},like(t){let a=JSON.parse(localStorage.getItem("likeData"));if(null==a||0==a.length)return this.likeData=[],void this.getData(this.likeData,t);0==a.length||1!=this.islike?0==a.length||0!=this.islike||this.getData(a,t):a.forEach((s,i)=>{s.id==t&&(this.islike=!1,a.splice(i,1),localStorage.setItem("likeData",JSON.stringify(a)))})},Open(){this.isOpen=!this.isOpen},lookReview(t){this.$router.push({name:"Reviews",params:{id:t}})},go(){this.$router.go(-1)}}},r=c,o=(s("59ee"),s("2877")),d=Object(o["a"])(r,i,e,!1,null,"6e73b728",null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-500be60c.b97b8ec5.js.map