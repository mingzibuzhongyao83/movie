(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9a2e21e"],{"2d3b":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box"},[s("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.onSearch,focus:t.onfocus},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:function(a){return t.onSearch(t.value)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1),s("div",{staticClass:"movie-box"},[1==t.isclick?s("div",{staticClass:"hot-box"},[s("div",{staticClass:"hot-box-top clearfix"},[s("div",{staticClass:"hot-title fl"},[t._v("搜索历史")]),s("div",{staticClass:"detele fr",on:{click:t.clear}},[s("van-icon",{staticClass:"v-icon",attrs:{name:"delete",color:"#000000",size:"20"}})],1)]),s("div",{staticClass:"hot-content clearfix"},t._l(t.historyData,(function(a,i){return s("div",{key:i,staticClass:"hot-txt fl",on:{click:function(s){return t.clickSearch(a)}}},[t._v(t._s(a))])})),0)]):t._e(),0==t.isclick?s("div",{staticClass:"movie"},t._l(t.movieData,(function(a,i){return s("div",{key:i,staticClass:"big-box"},[s("div",{staticClass:"top clearfix"},[s("div",{staticClass:"img fl"},[s("img",{staticClass:"auto-img",attrs:{src:a.pic,alt:""}})]),s("div",{staticClass:"left fl"},[s("div",{staticClass:"title"},[s("span",[t._v(t._s(a.title))])]),s("div",{staticClass:"sort"},[s("span",[t._v(t._s(a.sort))])]),s("div",{staticClass:"lang"},[s("span",[t._v(t._s(a.lang))])]),s("div",{staticClass:"note"},[s("span",[t._v(t._s(a.note))])]),t._m(0,!0)]),t._m(1,!0)]),s("div",{staticClass:"bottom"},[s("span",[t._v(t._s(a.des))])])])})),0):t._e()])])},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"move"},[s("span",[t._v("暂无更多信息")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"right fr"},[s("span",[t._v("暂无评分")])])}],c=s("2f62"),o={name:"Search",data(){return{value:"",listData:[],isclick:!0,loading:!1}},computed:{...Object(c["b"])("searchModule",["historyData","movieData","Data","finished","start","count"])},created(){this.$store.commit("searchModule/changeData",{key:"movieData",value:[]});let t=JSON.parse(localStorage.getItem("historyData"));null!=t&&(this.listData=t),this.$store.commit("searchModule/changeData",{key:"historyData",value:t})},methods:{search(t){this.axios({method:"GET",url:"/search",params:{type:"/?action=search&",wd:t}}).then(t=>{let a=t.data.data.slice(0,10),s=/<[^>]*>|<\/[^>]*>|&nbsp;/g;if("202"==t.data.code)return this.$toast.clear(),void this.$toast({forbidClick:!0,duration:2e3,message:"超出了能力范围..."});a.forEach(t=>{this.axios({method:"GET",url:"/search",params:{type:"/?action=play&",id:t.id}}).then(a=>{let i=a.data.data.des;t.des=""==i?"暂无简介":i.replace(s,"")}).catch(t=>{})}),setTimeout(()=>{this.$store.commit("searchModule/changeData",{key:"movieData",value:a})},3e3),this.$toast.clear()}).catch(t=>{this.$toast.clear()})},onSearch(t){if(""==t)return void this.$toast({forbidClick:!0,duration:2e3,message:"请输入内容"});this.isclick=!1,this.$store.commit("searchModule/changeData",{key:"movieData",value:[]}),null==localStorage.getItem("historyData")?(this.listData.unshift(t),localStorage.setItem("historyData",JSON.stringify(this.listData))):(-1!=this.listData.indexOf(t)?(this.listData.splice(this.listData.indexOf(t),1),this.listData.unshift(t)):this.listData.unshift(t),this.listData.length>10&&this.listData.pop(),localStorage.setItem("historyData",JSON.stringify(this.listData)));let a=JSON.parse(localStorage.getItem("historyData"));this.$store.commit("searchModule/changeData",{key:"historyData",value:a}),this.$toast.loading({forbidClick:!0,duration:0,message:"数据加载中..."}),this.search(t)},clear(){localStorage.removeItem("historyData"),this.$store.commit("searchModule/changeData",{key:"historyData",value:[]})},onfocus(){this.value="",this.isclick=!0,this.$store.commit("searchModule/changeData",{key:"movieData",value:[]})},clickSearch(t){this.value=t,this.isclick=!1,this.$toast.loading({forbidClick:!0,duration:0,message:"数据加载中..."}),this.search(t),-1!=this.listData.indexOf(t)&&(this.listData.splice(this.listData.indexOf(t),1),this.listData.unshift(t)),localStorage.setItem("historyData",JSON.stringify(this.listData))}}},l=o,r=(s("90a5"),s("2877")),n=Object(r["a"])(l,i,e,!1,null,"4e530da8",null);a["default"]=n.exports},"90a5":function(t,a,s){"use strict";var i=s("c348"),e=s.n(i);e.a},c348:function(t,a,s){}}]);
//# sourceMappingURL=chunk-e9a2e21e.2cc7de2c.js.map